<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>言论</title>
	<link rel="stylesheet" href="./bootstrap-3.3.7/css/bootstrap.min.css">
	<link rel="stylesheet" href="./yl/css/yl.css">
	<link rel="stylesheet" href="./layui/css/layui.css" media="all">
	<script src="./layui/layui.js"></script>
	<script type="text/javascript" src="./js/jquery-3.2.1.min.js"></script>
	<script type="text/javascript" src="./js/vue.min.js"></script>
	<script type="text/javascript">
	$(document).ready(function() {
		 $.ajax({
		 url : "http://localhost:8080/yl/EssayList.action",//请求地址
		 dataType : "json",//数据格式 
		 type : "get",//请求方式
		 success : function(data) {   //如何发送成功
		 var html = "";
		 for(var i=0;i<data.length;i++){    //遍历data数组
		             var ls = data[i];
		 			 var text = ls.text;
		 			 if(text.length > 200){
		 				text = text.substring(0,200)+"... ...";
		 			 }
		 			 html +="<div class='essay-all'>";
		 			 html +="<a href='./yl/essay.html?essayid="+ls.essayid+"' target='_blank'>";
		 			 html +="<h4>"+ls.essayname+"</h4></a>";
		 			 html +="&nbsp;&nbsp<p class='essay-part'>"+text+"</p></div>";
		         	 $("#essay").html(html); //在html页面id=essay的标签里显示html内容
		     }
		 },
		 });
	});
	</script>
</head>
<body>
	<div id="head" class="form-horizontal">
		<a href="./index.html"><div id="logo">
			<span id="title">言论</span><br>
			&nbsp;<span style="color: #EF824E;">——言己之论 论他之言——</span>
		</div></a>
		<div id="search" class="form-group has-success has-feedback">
			<div class="input-group">
				<input type="text" placeholder="搜索" name="search" class="form-control" id="inputGroupSuccess2" 
				aria-describedby="inputGroupSuccess2Status">
				<span class="input-group-addon" style="border-color: #EF824E;background: #EF824E;"><a href="./yl/search.html">
					搜索
				</a></span>
			</div>
		</div>
		<div id="event">
			<div id="login">
				<a href="./yl/login.html"><button class="btn btn-default" style="border:none;margin-right: 30px; ">登录{{name}}</button></a>
				<a href="./yl/register.html"><button class="btn btn-info" style="-webkit-border-radius: 2em;moz-border-radius: 2em;border-radius: 2em;width: 100px;height: 45px;">注册</button></a>
			</div>
			
			<div class="box" id="info">
				<div class="myicon" >
					<a href="./yl/user.html"><img src="./imgs/user.jpg" alt="个人中心"></a>
				</div>
				<div id="write"><a href="./yl/write.html"><button class="btn btn-default">写文章</button></a></div>
			</div>
		</div>
	</div>
	<div class="container">
		<div id="lunbo">
			<div class="layui-carousel" id="test1">
			  <div carousel-item>
			    <div><img src="./imgs/1.jpg" alt=""></div>
			    <div><img src="./imgs/2.jpg" alt=""></div>
			    <div><img src="./imgs/3.jpg" alt=""></div>
			    <div><img src="./imgs/4.jpg" alt=""></div>
			    <div><img src="./imgs/5.jpg" alt=""></div>
			  </div>
			</div>
		</div>
		<div id="main">
			<div id="essay">
				
			</div>
			<div id="other">
				<div class="otherall">
					<p>言论公告</p>
					<p id="notice"><span>&nbsp;&nbsp;</span>公告公告公告公告公告公告公告公告公告公告公告公告公告公告公告公告公告公告公告公告公告
					公告公告公告公告公告公告公告公告公告公告公告公告公告公告公告公告</p>
				</div>
				<div class="otherall">
					<p>推荐作者</p>
					<p id="writer">
						<a href="">作者</a><a href="">作者</a><a href="">作者</a><a href="">作者</a><a href="">作者</a><a href="">作者</a><a href="">作者</a><a href="">作者</a>
					</p>
				</div>
			</div>
		</div>
		<div id="bottom">
			<span>关于言论</span>
			<span>&nbsp;&nbsp;</span>
			<span>联系我们</span><br>
			<span>QQ326456</span><br>
			<span>@yl版权所有</span>
		</div>
	</div>
	<script>
		layui.use('carousel', function(){
		  var carousel = layui.carousel;
		  //建造实例
		  carousel.render({
		    elem: '#test1'
		    ,width: '100%' 
		    ,arrow: 'hover' 
		  });
		});
	</script>
	<script type="text/javascript">
	$(document).ready(function() {
		var thisURL = document.URL;  
		var getval =thisURL.split('?')[1];  
		var showval= getval.split("=")[1]; 
		var user = showval;
		if(user != null){
			document.getElementById("login").style.visibility="hidden";
			document.getElementById("info").style.visibility="visible";
		}
		
	});
	
	new Vue({
		el: '#login',
		data: {
			name: 'lisi'
		}
	});
	</script>
</body>
</html>